

<!DOCTYPE html>
<html class="writer-html5" lang="en" data-content_root="../../">
<head>
  <meta charset="utf-8" /><meta name="viewport" content="width=device-width, initial-scale=1" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Appendix B: Using Debug Probes &mdash; Vivado Tutorial  documentation</title>
      <link rel="stylesheet" type="text/css" href="../../_static/pygments.css?v=80d5e7a1" />
      <link rel="stylesheet" type="text/css" href="../../_static/css/theme.css?v=e59714d7" />
      <link rel="stylesheet" type="text/css" href="../../_static/togglebutton.css?v=13237357" />

  
    <link rel="shortcut icon" href="../../_static/favicon.ico"/>
      <script src="../../_static/jquery.js?v=5d32c60e"></script>
      <script src="../../_static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
      <script src="../../_static/documentation_options.js?v=187304be"></script>
      <script src="../../_static/doctools.js?v=9bcbadda"></script>
      <script src="../../_static/sphinx_highlight.js?v=dc90522c"></script>
      <script>let toggleHintShow = 'Click to show';</script>
      <script>let toggleHintHide = 'Click to hide';</script>
      <script>let toggleOpenOnPrint = 'true';</script>
      <script src="../../_static/togglebutton.js?v=4a39c7ea"></script>
      <script>var togglebuttonSelector = '.toggle, .admonition.dropdown';</script>
    <script src="../../_static/js/theme.js"></script>
    <link rel="index" title="Index" href="../../genindex/" />
    <link rel="search" title="Search" href="../../search/" />
    <link rel="prev" title="Appendix A: Using the Zynq7 Processing System" href="../processing_system/" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >

          
          
          <a href="../../" class="icon icon-home">
            Vivado Tutorial
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search/" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>
        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../../overview/">Overview</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Walkthrough</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../../setup/">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../sources/">Adding Sources</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../simulation/">Simulating Our Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../block_designs/">Adding Block Designs</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../synthesis/">Synthesizing Our Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../constraints/">Adding Constraints</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../implementation/">Implementing Our Design</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../bitstream/">Generating a Bitstream</a></li>
</ul>
<p class="caption" role="heading"><span class="caption-text">Appendices</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../processing_system/">Appendix A: Using the Zynq7 Processing System</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Appendix B: Using Debug Probes</a></li>
</ul>

        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../">Vivado Tutorial</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="../../" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Appendix B: Using Debug Probes</li>
      <li class="wy-breadcrumbs-aside">
              <a href="https://github.com/Aidan-McNay/vivado-tutorial/blob/main/docs/appendices/debug_probes.rst" class="fa fa-github"> Edit on GitHub</a>
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="appendix-b-using-debug-probes">
<h1>Appendix B: Using Debug Probes<a class="headerlink" href="#appendix-b-using-debug-probes" title="Link to this heading"></a></h1>
<p>Suppose we want to have more visibility into our design once it’s on
the FPGA, and be able to see the value of signals. This is where <em>debug
probes</em> come in - Vivado’s mechanism for allowing you to monitor and
select signals. Let’s build on our walkthrough by adding some debug
probes to monitor signals!</p>
<div class="warning admonition">
<p class="admonition-title">Do in the GUI</p>
<p>Since this process is interactive by nature, you should only do
so in the GUI, although you could set up the debug cores from
Tcl if you really needed to</p>
</div>
<div class="important admonition">
<p class="admonition-title">Adding Signals to Debug</p>
<p>On the left, in <strong>Flow Navigator</strong>, under <strong>Synthesis</strong>,
select <strong>Open Synthesized Design</strong> to open the previously
synthesized design. From there, click on <strong>Set Up Debug</strong>
in the same section to open up the debug wizard - this
is how we’ll set up our signals to debug!</p>
<ul class="simple">
<li><p>On the welcome page, click <strong>Next</strong></p></li>
<li><p>On the bottom-left, click <strong>Find Nets To Add</strong>. This will pull
up a search window that will allow us to find specific nets.
Use this window to select our <code class="docutils literal notranslate"><span class="pre">gray_count</span></code> and <code class="docutils literal notranslate"><span class="pre">en</span></code> ports.</p></li>
<li><p>Before clicking <strong>Next</strong>, notice that Vivado has already
identified the clock domain for these signals in their
entries. <em>However</em>, debug cores need a “free-running” clock;
since our clocking wizard has a reset signal, it is not
technically free-running. Vivado will not complain about this,
but data will likely not be captured correctly later.
Right-click on these entries to change the clock domains for
our signals to the Processing System’s clock, then click <strong>Next</strong>.
This will have our signals sampled at 5 times faster than they’re
changing, but that’s ok for our purposes.</p></li>
<li><p>Keep the sample depth (number of samples to acquire at once) and
the input pipe stages (the delay in sampling, to improve timing)
at their defaults of 1024 and 0, then click <strong>Next</strong></p></li>
<li><p>On the summary page, verify that one debug core will be created
for the one clock that was found, then click <strong>Finish</strong></p></li>
</ul>
</div>
<p>We’ve now successfully added our signals to probe! While the synthesis
of our design is still good, adding this new hardware has caused our
implementation to go out-of-date.</p>
<div class="important admonition">
<p class="admonition-title">Recompile the Design</p>
<p>Follow the steps from before to generate the bitstream; Vivado
will detect that the implementation is out-of-date, and will re-run
it accordingly.</p>
</div>
<p>Once our design has been recompiled into a bitstream, re-open the
hardware manager as before, and open the target and program the
device; this time, Vivado should also detect the <code class="docutils literal notranslate"><span class="pre">.ltx</span></code> file for
our debug probes.</p>
<p>Once your board has been programmed, you should be presented with
a new view, corresponding to your debug core. It should contain:</p>
<ul class="simple">
<li><p><strong>Waveform</strong>: The captured waveform of your signals</p></li>
<li><p><strong>Trigger Setup</strong>: Setup of the conditions when our capture should
trigger</p></li>
<li><p><strong>Capture Setup</strong>: Configurations for how signals should be
captured (we won’t use)</p></li>
<li><p><strong>Status</strong>: An overview of the current status of the debug core.
This should start as “Idle”</p></li>
<li><p><strong>Settings</strong>: The settings for the debug core (which should default
to our configurations from before - we won’t edit these)</p></li>
</ul>
<p>First, let’s create a condition to capture signals - this is a <em>trigger</em>:</p>
<div class="important admonition">
<p class="admonition-title">Adding a Trigger</p>
<p>In the <strong>Trigger Setup</strong> tab, click the <strong>+</strong> icon to add a trigger.
Select the <code class="docutils literal notranslate"><span class="pre">en</span></code> signal, which we’ll use to trigger off of, then
click <strong>OK</strong>. Edit the fields so that we trigger when our design
is enabled; an example would be using the <code class="docutils literal notranslate"><span class="pre">==</span></code> operator, the
<code class="docutils literal notranslate"><span class="pre">[B]</span></code> radix, and a value of <code class="docutils literal notranslate"><span class="pre">1</span></code>.</p>
<p>We’ll only use one trigger, but if you were to add multiple, you
could use the logic gate icon to configure how the independent
triggers were combined to generate the overall trigger.</p>
</div>
<p>From here, we can capture some data!</p>
<div class="important admonition">
<p class="admonition-title">Capturing Probe Data</p>
<p>First, for demonstration purposes, change the first slide switch to
the lower position, disabling the design (<code class="docutils literal notranslate"><span class="pre">en</span> <span class="pre">=</span> <span class="pre">0</span></code>)</p>
<p>Either in the <strong>Status</strong> or <strong>Waveform</strong> tab, click the play
icon to start capturing data.</p>
<p>The <strong>Status</strong> tab should change to “Waiting for Trigger”, and
indicate that the capture window has sampled 512 out of 1024 samples;
this is because our debug core (by default) captures an equal
number of signals before and after a trigger.</p>
<p>To trigger the design, change the first slide switch to the upper
position, enabling the design (<code class="docutils literal notranslate"><span class="pre">en</span> <span class="pre">=</span> <span class="pre">1</span></code>). This should trigger
the design; the <strong>Status</strong> tab will momentarily change before
returning to “Idle”, and the <strong>Waveform</strong> tab should display
the captured data. You should see the design staying
the same before the trigger, and then counting in gray code after
the trigger, indicating the design is working as intended! Finally,
verify that the signals in <code class="docutils literal notranslate"><span class="pre">gray_count</span></code> are changing approximately
once every 5 units in the waveform; one unit corresponds to 1 clock
cycle of the debug core, and since our signals are connected to a
clock that’s 5 times slower, their rate of change should reflect that.</p>
<p>Go through the capture process a few more times to observe that
the captured data changes (as the place in the count will change
each time). Congratulations - you’ve successfully probed the design!</p>
</div>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="../processing_system/" class="btn btn-neutral float-left" title="Appendix A: Using the Zynq7 Processing System" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2025, Aidan McNay.</p>
  </div>

  Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    provided by <a href="https://readthedocs.org">Read the Docs</a>.
   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>